/*----------------------------------------------------------------------------------------
# Colors
----------------------------------------------------------------------------------------*/
/* 
 * First set some basic defaults for when a background color is used
 */
.has-background {
	color: var(--wp--custom--color--contrast--default, inherit);
}

.has-background a:hover {
	color: inherit;
	opacity: 0.8;
}

/* 
 * Then for each theme color used as a background, set default text
 * color, link color and hover, and button color.
 */
$theme-colors: ('primary', 'secondary', 'tertiary', 'primary-alt', 'secondary-alt', 'tertiary-alt', 'highlight', 'highlight-alt', 'dark', 'dark-alt', 'neutral', 'neutral-alt', 'foreground-alt', 'base', 'contrast', 'white', 'off-white', 'very-light-gray', 'light-gray', 'gray', 'dark-gray', 'very-dark-gray', 'light-green', 'green', 'bright-green', 'dark-bright-green', 'light-yellow', 'yellow', 'light-orange', 'orange', 'dark-orange', 'light-blue', 'blue', 'dark-blue', 'midnight-blue', 'dark-midnight-blue', 'light-purple', 'purple', 'dark-purple', 'light-red', 'red', 'dark-red', 'almost-black', 'not-quite-black', 'black');

@mixin color-defaults() {
	@each $color in $theme-colors {
		.has-#{$color}-background-color {
			color: var(--wp--custom--color--contrast--#{$color}, var(--wp--custom--color--contrast--default));			
			
			& a:not(.wp-element-button) {
				color: var(--wp--custom--color--highlight--#{$color}, var(--wp--custom--color--highlight--default));
			}
		}
	}
}

@include color-defaults();

/* 
 * On Cover blocks, default the text color to white, but set it back to black
 * on light backgrounds with dim less than 30%
 */
:where(.wp-block-cover-image.is-light:not(.has-text-color)), :where(.wp-block-cover.is-light:not(.has-text-color)) {
    color: #fff;

	&:has(.has-background-dim-10),
	&:has(.has-background-dim-20),
	&:has(.has-background-dim-30) {
		color: #000;
	}
}
